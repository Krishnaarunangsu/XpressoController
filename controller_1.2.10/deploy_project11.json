{
	"name": "pipeline_project25",
	"target_environment_type": "kubernetes",
	"target_environment": "DEV",
	"components": {
		"service_reader": {
			"replicas": 2,
			"build_version": 3,
			"environment": [],
			"ports": [{
				"name": "default",
				"port": 5000
			}, {
				"name": "app1_port_new",
				"port": 5051
			}],
			"persistence": {
				"mount_path": "/app/data/"
			},
			"is_external": true
		}

	},
	"pipelines": {
		"fetch_data": {
			"components": {
				"service_reader": {
					"mount_path": "/app/data",
					"custom_docker_image": "dockerregistry.xpresso.ai/xprops/pipeline_project25/service_reader--master:4"
				}
			}
		}
	},
	"service_mesh": {
        "reviews_service": {
            "components": {
                "no_stars": [{
                    "version_name": "v1",
                    "replicas": 1,
                    "build_version": 2,
                    "ports": [{"name": "http", "port": 9080}]
                }],
                "black_stars": [{
                    "version_name": "v2",
                    "replicas": 1,
                    "custom_docker_image": "docker.io/istio/examples-bookinfo-reviews-v2:1.15.0",
                    "ports": [{"name": "http", "port": 9080}]
                }],
                "red_stars": [{
                    "version_name": "v3",
                    "replicas": 1,
                    "custom_docker_image": "docker.io/istio/examples-bookinfo-reviews-v3:1.15.0",
                    "ports": [{"name": "http", "port": 9080}]
                }]
            },
            "strategy": {
                "weights": {
                   "v3": 70,
                    "v2": 20,
                    "v1": 10
                },
                "rule": {
                    "header": [
                        {
                            "match_type": "exact",
                            "match_string": "sahil.malav",
                            "header_value": "end-user",
                            "destination": "v2"
                        }
                    ],
                    "default_destination": "v1"
                }
            }
        }
    }
}
